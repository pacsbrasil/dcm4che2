<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mbean PUBLIC "-//JBoss//DTD JBOSS XMBEAN 1.1//EN" "http://www.jboss.org/j2ee/dtd/jboss_xmbean_1_1.dtd">

<mbean>
   <description>XDS-I Service. Cross-enterprise Document Sharing for Imaging. (Imaging Document Source actor)</description>

   <descriptors>
      <persistence persistPolicy="OnUpdate"/>
      <persistence-manager value="org.jboss.mx.persistence.DelegatingPersistenceManager"/>
   </descriptors>

   <class>org.dcm4chex.archive.xdsi.XDSIService</class>

   <constructor>
      <description>The default constructor</description>
      <name>XDSIService</name>
   </constructor>

   <!-- Attributes -->
   
   <attribute access="read-write" getMethod="getDocRepositoryURI" setMethod="setDocRepositoryURI">
      <description>Document Repository URI.
      </description>
      <name>DocRepositoryURI</name>
      <type>java.lang.String</type>
      <descriptors>
         <value value="http://hcxw2k1.nist.gov:8080/xdsServices2/registry/soap/test?testid=11746"/>
      </descriptors>
   </attribute>

   <attribute access="read-write" getMethod="getProxyHost" setMethod="setProxyHost">
      <description>Proxy host if http access use http proxy.
      </description>
      <name>ProxyHost</name>
      <type>java.lang.String</type>
      <descriptors>
         <value value="proxy-wn"/>
      </descriptors>
   </attribute>
   <attribute access="read-write" getMethod="getProxyPort" setMethod="setProxyPort">
      <description>Proxy port if http access use http proxy.
      </description>
      <name>ProxyPort</name>
      <type>int</type>
      <descriptors>
         <value value="3128"/>
      </descriptors>
   </attribute>

   <attribute access="read-write" getMethod="getPropertyFile" setMethod="setPropertyFile">
      <description>Metadata Property File. 
      		A relative path name is resolved relative to archive-install-directory/server/default/.
      </description>
      <name>MetadataPropertyFile</name>
      <type>java.lang.String</type>
      <descriptors>
         <value value="conf/dcm4jboss-xdsi/metadata.conf"/>
      </descriptors>
   </attribute>
   <attribute access="read-write" getMethod="getDocTitleCodeListFile" setMethod="setDocTitleCodeListFile">
      <description>File containing Codes for Document Title (for KOS object and therefore xds metadata 'title').
      		Format: [designator^]codevalue^meaning 
      		A relative path name is resolved relative to archive-install-directory/server/default/.
      </description>
      <name>DocTitleCodeListFile</name>
      <type>java.lang.String</type>
      <descriptors>
         <value value="conf/dcm4jboss-xdsi/docTitleCodes.txt"/>
      </descriptors>
   </attribute>
   <attribute access="read-write" getMethod="getEventCodeListFile" setMethod="setEventCodeListFile">
      <description>File containing Codes for eventCodeList.
      		Format: [designator^]codevalue^meaning 
      		A relative path name is resolved relative to archive-install-directory/server/default/.
      </description>
      <name>EventCodeListFile</name>
      <type>java.lang.String</type>
      <descriptors>
         <value value="conf/dcm4jboss-xdsi/eventCodes.txt"/>
      </descriptors>
   </attribute>
   <attribute access="read-write" getMethod="getClassCodeListFile" setMethod="setClassCodeListFile">
      <description>File containing Codes for ClassCode.
      		Format: [designator^]codevalue^meaning 
      		A relative path name is resolved relative to archive-install-directory/server/default/.
      </description>
      <name>ClassCodeListFile</name>
      <type>java.lang.String</type>
      <descriptors>
         <value value="conf/dcm4jboss-xdsi/classCodes.txt"/>
      </descriptors>
   </attribute>
   <attribute access="read-write" getMethod="getContentTypeCodeListFile" setMethod="setContentTypeCodeListFile">
      <description>File containing codes for Content Type Codes.
      		Format: [designator^]codevalue^meaning 
      		A relative path name is resolved relative to archive-install-directory/server/default/.
      </description>
      <name>ContentTypeCodes</name>
      <type>java.lang.String</type>
      <descriptors>
         <value value="conf/dcm4jboss-xdsi/contentTypeCodes.txt"/>
      </descriptors>
   </attribute>
   <attribute access="read-write" getMethod="getConfidentialityCodes" setMethod="setConfidentialityCodes">
      <description>Code list for confidentialityCode.
      		Format: [designator^]codevalue^meaning 
      		Use either newline or semicolon to seperate codes
      </description>
      <name>ConfidentialityCodes</name>
      <type>java.lang.String</type>
      <descriptors>
         <value value="cc1^confidentialityCode"/>
      </descriptors>
   </attribute>
   
   <attribute access="read-write" getMethod="getAuthorPersonMapping" setMethod="setAuthorPersonMapping">
      <description><![CDATA[Set either a fix authorPerson or a user to authorPerson mapping.
					<br/>
	 				Mapping format: &lt;user&gt;=&lt;authorPerson&gt;<br/>
	 				Use either newline or semicolon to seperate mappings.
	 				<br/>
	 				If '=' is ommited, a fix (global) authorPerson is set]]>
      </description>
      <name>AuthorPersonMapping</name>
      <type>java.lang.String</type>
      <descriptors>
         <value value="DCM4JBOSS"/>
      </descriptors>
   </attribute>
   <attribute access="read-write" getMethod="getAuthorRoles" setMethod="setAuthorRoles">
      <description><![CDATA[List of author roles (with display name).<br/>
      				Format: &lt;role&gt;^&lt;displayName&gt;<br/>
      				Use either newline or semicolon to seperate codes.
      				]]>
      </description>
      <name>AuthorRoles</name>
      <type>java.lang.String</type>
      <descriptors>
         <value value="stdRole^Standard Role;adminRole^Admin Role"/>
      </descriptors>
   </attribute>


   <attribute access="read-write" getMethod="getTestPath" setMethod="setTestPath">
      <description>Base directory path. (is used in sendSOAP for metadata and doc files!)
      </description>
      <name>TestPath</name>
      <type>java.lang.String</type>
      <descriptors>
         <value value="C:\willi\testkit\test"/>
      </descriptors>
   </attribute>
   &defaultAttributes;

   <!-- Operations -->
   <operation impact="ACTION">
     <description>Performs a NIST test.</description>
     <name>nistTest</name>
     <parameter>
       <description>TestID</description>
       <name>testID</name>
       <type>java.lang.String</type>
     </parameter>
     <return-type>boolean</return-type>
	</operation>
   <operation impact="ACTION">
     <description>Performs a simple soap test.</description>
     <name>sendSOAP</name>
     <parameter>
       <description>SOP Instance UID of Key Object</description>
       <name>kosIuid</name>
       <type>java.lang.String</type>
     </parameter>
     <parameter>
       <description>Metadata properties</description>
       <name>mdProps</name>
       <type>java.util.Properties</type>
     </parameter>
     <return-type>boolean</return-type>
	</operation>
   <operation impact="ACTION">
     <description>Performs a simple soap test.</description>
     <name>sendSOAP</name>
     <parameter>
       <description>SOP Instance UID of Key Object</description>
       <name>kosIuid</name>
       <type>java.lang.String</type>
     </parameter>
     <return-type>boolean</return-type>
	</operation>
   <operation impact="ACTION">
     <description>Send a SOAP message to DocRepositoryURI.</description>
     <name>sendSOAP</name>
     <parameter>
       <description>Filename of metadata file</description>
       <name>metadataFilename</name>
       <type>java.lang.String</type>
     </parameter>
     <parameter>
       <description>List of documents (Format:filename|mimiType|docUID[,filename|mimeType|docUID[,..]])</description>
       <name>docNames</name>
       <type>java.lang.String</type>
     </parameter>
     <return-type>boolean</return-type>
	</operation>
   <operation impact="ACTION">
     <description>Send a SOAP message to DocRepositoryURI.</description>
     <name>sendSOAP</name>
     <parameter>
       <description>Key Object Selection Dataset to submit.</description>
       <name>kos</name>
       <type>org.dcm4che.data.Dataset</type>
     </parameter>
     <parameter>
       <description>Metadata Properties</description>
       <name>mdProps</name>
       <type>java.util.Properties</type>
     </parameter>
     <return-type>boolean</return-type>
	</operation>
	
   <operation impact="INFO">
     <description>Get the authorPerson for a user.</description>
     <name>getAuthorPerson</name>
     <parameter>
       <description>user</description>
       <name>user</name>
       <type>java.lang.String</type>
     </parameter>
     <return-type>java.lang.String</return-type>
	</operation>
   <operation impact="INFO">
     <description>Join Metadata Properties with properties from Metadata Property File.</description>
     <name>joinMetadataProperties</name>
     <parameter>
       <description>Additional Metadata properties</description>
       <name>props</name>
       <type>java.util.Properties</type>
     </parameter>
     <return-type>java.util.Properties</return-type>
	</operation>
   <operation impact="INFO">
     <description>get list of roles.</description>
     <name>listAuthorRoles</name>
     <return-type>java.util.List</return-type>
	</operation>
   <operation impact="INFO">
     <description>get list of document titles.</description>
     <name>listDocTitleCodes</name>
     <return-type>java.util.List</return-type>
	</operation>
   <operation impact="INFO">
     <description>get list of eventCodes.</description>
     <name>listEventCodes</name>
     <return-type>java.util.List</return-type>
	</operation>
   <operation impact="INFO">
     <description>get list of classCodes.</description>
     <name>listClassCodes</name>
     <return-type>java.util.List</return-type>
	</operation>
   <operation impact="INFO">
     <description>get list of contentTypeCodes.</description>
     <name>listContentTypeCodes</name>
     <return-type>java.util.List</return-type>
	</operation>
   <operation impact="INFO">
     <description>get list of confidentialityCodes.</description>
     <name>listConfidentialityCodes</name>
     <return-type>java.util.List</return-type>
	</operation>
	   <operation impact="INFO">
     <description>clear CodeFileCache.</description>
     <name>clearCodeFileCache</name>
     <return-type>void</return-type>
	</operation>
	
   <operation impact="ACTION">
     <description>Read the configured Metadata Property File</description>
     <name>readPropertyFile</name>
     <return-type>void</return-type>
	</operation>
	
   &defaultOperations;
</mbean>

