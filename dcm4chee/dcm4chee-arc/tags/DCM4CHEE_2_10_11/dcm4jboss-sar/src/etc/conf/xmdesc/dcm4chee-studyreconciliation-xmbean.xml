<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mbean PUBLIC "-//JBoss//DTD JBOSS XMBEAN 1.1//EN" "http://www.jboss.org/j2ee/dtd/jboss_xmbean_1_1.dtd">

<mbean>
   <description>Study Reconciliation Service.</description>

   <descriptors>
      <persistence persistPolicy="OnUpdate"/>
      <persistence-manager value="org.jboss.mx.persistence.DelegatingPersistenceManager"/>
   </descriptors>

   <class>org.dcm4chex.archive.mbean.StudyReconciliationService</class>

   <constructor>
      <description>The default constructor</description>
      <name>StudyReconciliationService</name>
   </constructor>

   <!-- Attributes -->
   <attribute access="read-write" getMethod="getTaskInterval" setMethod="setTaskInterval">
      <description><![CDATA[Interval in which to check for studies for Reconciliation.
          <br>Format: 
			    <br><i>interval</i>!<i>from</i>-<i>to</i> or NEVER
          <br><i>interval</i> = ##s (in seconds), ##m (in minutes), ##h (in hours).
          <br><i>from</i> = start hour (0-23) when no Study Reconciliation should be performed
          <br><i>to</i> = end hour (0-23) when no Study Reconciliation should be performed
          <br>NEVER = disable automatic Study Reconciliation
          <br>Example:10s!9-17 means every 10 seconds, poll the database and 
          check study that need Reconciliation, except between the hours of 9:00am and 5:00pm.
          By setting this type of TaskInterval, you can ensure checks occur outside of peak imaging hours.]]>
          </description>
      <name>TaskInterval</name>
      <type>java.lang.String</type>
      <descriptors>
         <value value="NEVER"/>
      </descriptors>
   </attribute>
   
   <attribute access="read-write"
      getMethod="getCalledAET"
      setMethod="setCalledAET">
      <description>AE Title of reference FIND SCP. 
      </description>
      <name>FindSCPAETitle</name>
      <type>java.lang.String</type>
      <descriptors>
         <value value="TIANI_ARCHIVE"/>
      </descriptors>
   </attribute>
   <attribute access="read-write"
      getMethod="getCallingAET"
      setMethod="setCallingAET">
      <description>Calling AE Title used in association request to reference FIND SCP.
      </description>
      <name>CallingAETitle</name>
      <type>java.lang.String</type>
      <descriptors>
         <value value="DCM4CHEE"/>
      </descriptors>
   </attribute>
   
   <attribute access="read-write" getMethod="getMinStudyAge" setMethod="setMinStudyAge">
      <description>Minimum age of a study that will be checked for need of Reconciliation, in 
      		##w (in weeks), ##d (in days), or ##h (in hours).</description>
      <name>MinStudyAge</name>
      <type>java.lang.String</type>
      <descriptors>
         <value value="1d"/>
      </descriptors>
   </attribute>
   
   <attribute access="read-write" getMethod="getLimitNumberOfStudiesPerTask" setMethod="setLimitNumberOfStudiesPerTask">
      <description>Maximum number of studies that are checked in one task.
      </description>
      <name>LimitNumberOfStudiesPerTask</name>
      <type>int</type>
      <descriptors>
         <value value="100"/>
      </descriptors>
   </attribute>
   <attribute access="read-write" 
       getMethod="getScheduledStatus" 
       setMethod="setScheduledStatus">
      <description>Status indicating studies scheduled for reconciliation..
      </description>
      <name>ScheduledStatus</name>
      <type>int</type>
      <descriptors>
         <value value="1"/>
      </descriptors>
   </attribute>
   <attribute access="read-write" 
       getMethod="getSuccessStatus"
       setMethod="setSuccessStatus">
      <description>Status to indicate successful reconciliation.
      </description>
      <name>SuccessStatus</name>
      <type>int</type>
      <descriptors>
         <value value="0"/>
      </descriptors>
   </attribute>
   <attribute access="read-write" 
     getMethod="getFailureStatus"
     setMethod="setFailureStatus">
      <description>Status to indicate failed reconciliation.
      </description>
      <name>FailureStatus</name>
      <type>int</type>
      <descriptors>
         <value value="-1"/>
      </descriptors>
   </attribute>
   
   <attribute access="read-write"
      getMethod="getAcTimeout"
      setMethod="setAcTimeout">
      <description>A-Associate accept timeout in milliseconds. 0 = no timeout.
      </description>
      <name>AcceptTimeout</name>
      <type>int</type>
      <descriptors>
         <value value="10000"/>
      </descriptors>
   </attribute>
   <attribute access="read-write"
      getMethod="getDimseTimeout"
      setMethod="setDimseTimeout">
      <description>DIMSE message timeout in milliseconds. 0 = no timeout.
      </description>
      <name>DIMSETimeout</name>
      <type>int</type>
      <descriptors>
         <value value="60000"/>
      </descriptors>
   </attribute>
   <attribute access="read-write"
      getMethod="getSoCloseDelay"
      setMethod="setSoCloseDelay">
      <description>Socket close delay in milliseconds after an A-Release response.
      </description>
      <name>SocketCloseDelay</name>
      <type>int</type>
      <descriptors>
         <value value="50"/>
      </descriptors>
   </attribute>
   <attribute access="read-write"
      getMethod="getTLSConfigName"
      setMethod="setTLSConfigName">
      <description>Used internally. Do NOT modify.
      </description>
      <name>TLSConfigName</name>
      <type>javax.management.ObjectName</type>
      <descriptors>
         <value value="dcm4chee.archive:service=TLSConfig"/>
      </descriptors>
   </attribute>
   <attribute access="read-write"
      getMethod="getSchedulerServiceName"
      setMethod="setSchedulerServiceName">
      <description>Used internally. Do NOT modify.
      </description>
      <name>SchedulerServiceName</name>
      <type>javax.management.ObjectName</type>
      <descriptors>
         <value value="dcm4chee.archive:service=Scheduler"/>
      </descriptors>
   </attribute>  
   <attribute access="read-write"
      getMethod="getTimerIDCheckStudyReconciliation"
      setMethod="setTimerIDCheckStudyReconciliation">
      <description>The timer ID for scheduler of checking study reconciliation.
      </description>
      <name>TimerIDCheckStudyReconciliation</name>
      <type>java.lang.String</type>
      <descriptors>
         <value value="CheckStudyReconciliation" />
      </descriptors>
   </attribute>
   
   &defaultAttributes;

   <!-- Operations -->
   &defaultOperations;
   <operation impact="ACTION">
      <description>Used internally.</description>
      <name>check</name>
      <return-type>java.lang.String</return-type>
   </operation>

   <operation impact="ACTION">
      <description>Reschedule failed Reconciliations.</description>
      <name>reschedule</name>
      <return-type>java.lang.String</return-type>
   </operation>
</mbean>

