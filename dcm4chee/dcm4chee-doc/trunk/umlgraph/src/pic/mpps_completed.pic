#/usr/bin/pic2plot -Tps
.PS
boxwid=1.2

copy "sequence.pic";

# Object definition
actor(M,":Modality");
object(P,":MPPS SCP");
object(W,":MWL SCP");
object(U,":MPPS SCU");
object(I,":IAN SCU");
actor(O,":Order Filler");
step();
step();

# Modality Procedure Step Completed
active(M);
active(P);
message(M,P,"N-SET(COMPLETED)");
active(W);
message(P,W,"*update(COMPLETED)");
step();
inactive(W);
inactive(M);
active(U);
message(P,U,"notify(mpps)");
message(U,U,"queue(mpps)");
active(U);
active(O);
message(U,O,"N-SET(COMPLETED)");
step();
inactive(U);
inactive(O);
inactive(U);
active(I);
message(P,I,"notify(mpps)");
lconstraint_below(I,"{all objects received}");
message(I,I,"queue(ian)");
active(I);
active(O);
message(I,O,"N-CREATE(ian)");
step();
inactive(I);
inactive(P);
step();

# Object lifeline completion
complete(I);
complete(U);
complete(O);
complete(M);
complete(P);
complete(W);

.PE