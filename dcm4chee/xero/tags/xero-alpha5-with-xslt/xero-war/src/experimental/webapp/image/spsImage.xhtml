<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" 
      xmlns:svg="http://www.w3.org/2000/svg"
      xmlns:c="http://java.sun.com/jstl/core"
      xmlns:xlink="http://www.w3.org/1999/xlink"
      xmlns:se="http://www.dcm4chee.org/xero/search/study/"
      xmlns:v="urn:schemas-microsoft-com:vml"
>
      
  <head>
    <title>SVG embedded inline in XHTML</title>
	<c:if test="#{browser=='MSIE'}">
<xml:namespace ns="urn:schemas-microsoft-com:vml" prefix="v"/>
<style type="text/css">
v\:* { behavior: url(#default#VML); 
  }
</style>
	</c:if>
  </head>
  <body>

    <h1>SVG embedded inline in XHTML in #{browser}</h1>

	<c:choose>
	<c:when test="#{browser=='MSIE'}">
	  MSIE (3) - todo, render using VML instead of SVG.
  <div style="position: absolute; top: 200px; left: 50px; width: 260px; height: 332px; overflow: hidden;">
	<v:group 
	  style="width:260px; height: 332px;" 
	  coordorigin="1000, 1000" 
	  coordsize="400, 400"
	>
	  <v:shape id="simg1-00" style="width:2560; height:3328; left: 0; top: 0;">
 	    <v:imagedata id="vimg1-00" 
	      src="/xero/devwado?requestType=WADO&amp;studyUID=1&amp;seriesUID=1&amp;objectUID=1.2.840.113681.2200664339.718.3236946656.53"  
 	      style="width:2560; height:3328; left: 0; top: 0;"
	    />
	  </v:shape>
	  <v:shape id="timg1-00" style="width: 200; height: 25; top: 1500; left: -200;">
	    <v:textbox>Text Annotation</v:textbox>
	  </v:shape>
	  <v:rect fillcolor="green" style="top:0; left:-200; width: 20; height: 20;" />
	  <v:rect fillcolor="green" style="top:3308; left: -200; width: 20; height: 20;" />
	  <v:rect fillcolor="green" style="top:0; left: 2740; width: 20; height: 20;" />
	  <v:rect fillcolor="green" style="top:3288; left: 2720; width: 40; height: 40;" />
	</v:group>
	  </div>
    </c:when>
    <c:otherwise>


    <svg:svg width="2560" height="3328" viewBox="0 0 2560 3328">
      <svg:defs>
      <svg:image region="0,0,0.5,0.5" id="img1-00" xlink:href="/xero/devwado?requestType=WADO&amp;studyUID=1&amp;seriesUID=1&amp;objectUID=1.2.840.113681.2200664339.718.3236946656.53&amp;region=0,0,0.5,0.5&amp;windowWidth=4096&amp;windowCenter=2048" width="1280" height="1664" preserveAspectRatio="none" transform="translate(1,2)"/>
      <svg:image id="img1-10" xlink:href="/xero/devwado?requestType=WADO&amp;studyUID=1&amp;seriesUID=1&amp;objectUID=1.2.840.113681.2200664339.718.3236946656.53&amp;region=0.5,0,1,0.5&amp;windowWidth=4096&amp;windowCenter=2048" width="1280" height="1664" preserveAspectRatio="none" transform="translate(1281,2)"/>
      <svg:image id="img1-01" xlink:href="/xero/devwado?requestType=WADO&amp;studyUID=1&amp;seriesUID=1&amp;objectUID=1.2.840.113681.2200664339.718.3236946656.53&amp;region=0,0.5,0.5,1&amp;windowWidth=4096&amp;windowCenter=2048" width="1280" height="1664" preserveAspectRatio="none" transform="translate(1,1665)"/>
      <svg:image id="img1-11" xlink:href="/xero/devwado?requestType=WADO&amp;studyUID=1&amp;seriesUID=1&amp;objectUID=1.2.840.113681.2200664339.718.3236946656.53&amp;region=0.5,0.5,1,1&amp;windowWidth=4096&amp;windowCenter=2048" width="1280" height="1664" preserveAspectRatio="none" transform="translate(1281,1665)"/>
      <svg:g id="circ">
        <svg:circle cx="1280px" cy="1664px" r="40px" fill="#ff0000" stroke="#000000" stroke-width="3px"/>
      </svg:g>
      </svg:defs>
      <svg:use xlink:href="#img1-00" />
      <svg:use xlink:href="#img1-01" />
      <svg:use xlink:href="#img1-10" />
      <svg:use xlink:href="#img1-11" />
      <svg:use xlink:href="#circ" />
    </svg:svg>
    <!-- 
	Non-SVG stuff
    <svg:svg width="256" height="256" viewBox="0 0 1200 1200">
      <svg:defs>
        <svg:image id='img2' xlink:href="/xero/devwado?requestType=WADO&amp;studyUID=1&amp;seriesUID=1&amp;objectUID=1.2.840.113681.2200664339.718.3236946656.59&amp;region=0,0,0.5,0.5&amp;windowWidth=4096&amp;windowCenter=2048" width="1280" height="1664" preserveAspectRatio="none" transform="translate(1,1)"/>
      </svg:defs>
      <svg:use xlink:href="#circ" />
    </svg:svg>
     -->
   </c:otherwise>
   </c:choose>
  </body>
</html>
