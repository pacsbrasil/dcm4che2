<!-- Defines a bunch of search variables for inclusion in XSL files. -->
<x:xsl
   pageConfig="#{(pageConfig!=null ? pageConfig : metadata.search).searchVars}"
   xmlns:x="http://www.dcm4che.org/xero/jsf"
   xmlns:ui="http://java.sun.com/jsf/facelets"
   xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
   xmlns:m="http://www.dcm4che.org/xero/metadata/search/searchVars"
   m:includeXsl="/search/searchVars.xhtml"
   m:includeXsl.priority="-10"
>

<xsl:variable name="tableColumnsDoc" select="/documents/tableColumns" />
<xsl:variable name="tableColumns" select="document($tableColumnsDoc)/s:searchCriteria" />
<xsl:variable name="displayedColumns" select="$tableColumns/s:attribute[@column='true']" />

<xsl:variable name="searchResultsDoc" select="/documents/searchResults" />
<xsl:variable name="docNode" select="document($searchResultsDoc)" />

<xsl:variable name="searchParameters" select="/documents/s:searchCriteria" />

<xsl:variable name="cid" select="/documents/@conversationId" />

<!-- Patient node needs to be defined for some of the includes, so define it as ALL patients -->
<xsl:variable name="patientNode" select="$docNode/se:search/se:patient" />

<xsl:variable name="selectedStudies" select="/documents/study" />

</x:xsl>