<x:source 
  pageConfig="#{(pageConfig!=null ? pageConfig : metadata).search}"
  xmlns:x="http://www.dcm4che.org/xero/jsf"
  xmlns:h="http://java.sun.com/jsf/html"
  xmlns:m="http://www.dcm4che.org/xero/metadata/search"
  m:includeSource="/search/search.xhtml"
  m:xsl="../search/searchXsl.xsl"
  m:layout.tableColumns="../search/tableColumns.seam"
  m:layout.searchCommands="../search/searchCommands.seam"
>
  <cycle>../cycle/cycle.xml</cycle>
  <!-- Contains references to the source documents and criteria values for
       searching.  It may also contain session or conversation based temporary settings.
  -->
  <!-- The search parameters are the current parameters and values used, if any. -->
  <h:outputText value="#{StudySearchCriteria.xml}" escape="false" />
  <!-- The results from the above search.  This will be empty if the search has not
       yet been requested.
    -->
  <searchResults>/wado2/study.xml?#{StudySearchCriteria.URLParameters}</searchResults>
  <c:if test="#{studySelection!=null}" xmlns:c="http://java.sun.com/jstl/core">
    <!-- Do this as one row without white space because there might be lots of them. -->
    <c:forEach var="studySel" items="#{studySelection}"><study uid="#{studySel}"/></c:forEach>
  </c:if>
  
  <layout tableColumns="#{pageConfig.layout.tableColumns}" searchCommands="#{pageConfig.layout.searchCommands}"/>
  
  <tableColumns>#{pageConfig.layout.tableColumns}</tableColumns>
</x:source>