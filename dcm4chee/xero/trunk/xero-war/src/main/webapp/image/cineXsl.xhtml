<x:xsl
  pageConfig="#{PageConfig.display.cine}"
  xmlns:x="http://www.dcm4che.org/xero/jsf"
  xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
  xmlns:ui="http://java.sun.com/jsf/facelets"
  xmlns:m="http://www.dcm4che.org/xero/metadata/display/cine"
  m:toolbar="cineIcon"
  m:toolbar.priority="15"
  m:includeXsl="/image/cineXsl.xhtml"
  m:includeXsl.priority="-25"
  m:meta="cineMeta"
>
<!-- 
	 The CINE XSL stylesheet defines the options required for adding CINE playback
     and controls to the images.
-->

<!-- Generate the cine meta-data information as appropriate -->
<xsl:template name="cineMeta">
    <xsl:if test="/documents/cine!='' and $imageNextUID!=''">
      <meta>
        <xsl:attribute name="http-equiv">refresh</xsl:attribute>
        <xsl:attribute name="content"><xsl:value-of select="/documents/cine" />; URL=image.seam?cid=<xsl:value-of select="$cid" />&amp;studyUID=<xsl:value-of select="$studyUID"/>&amp;seriesUID=<xsl:value-of select="$seriesUID"/>&amp;objectUID=<xsl:value-of select="$imageNextUID" />&amp;cine=<xsl:value-of select="/documents/cine" /></xsl:attribute>
      </meta>
    </xsl:if>
</xsl:template>

<!-- Display the CINE label/icon, only if there is a next image-->
<xsl:template name="cineIcon">
    <xsl:if test="$imageNextUID!=''">
       <xsl:if test="/documents/cine!=''">
         <a>
           <xsl:attribute name="href">image.seam?cid=<xsl:value-of select="$cid" />&amp;studyUID=<xsl:value-of select="$studyUID"/>&amp;seriesUID=<xsl:value-of select="$seriesUID"/>&amp;objectUID=<xsl:value-of select="$imageUID" /></xsl:attribute>
           CINE Off
         </a>
       </xsl:if>
       <xsl:if test="/documents/cine=''">
         <a>
           <xsl:attribute name="href">image.seam?cid=<xsl:value-of select="$cid" />&amp;studyUID=<xsl:value-of select="$studyUID"/>&amp;seriesUID=<xsl:value-of select="$seriesUID"/>&amp;objectUID=<xsl:value-of select="$imageUID" />&amp;cine=0.5</xsl:attribute>           
         CINE
         </a>
       </xsl:if>
    </xsl:if>
</xsl:template>

</x:xsl>
