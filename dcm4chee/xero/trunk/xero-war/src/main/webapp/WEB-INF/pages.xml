<pages>

  <page view-id="/tabs/tabsFrame.xhtml">
    <begin-conversation join="true" />
  </page>
  
  <page view-id="/tabs/tabs.xhtml">
    <begin-conversation join="true" />
  </page>
  
  <page view-id="/search/search.xhtml" action="#{SearchPageAction.search}">
    <navigation from-action="#{SearchPageAction.search}">
      <rule if-outcome="Add">
         <redirect view-id="/cycle/cycleFrame.xhtml" />
      </rule>
      <rule if-outcome="View">
         <redirect view-id="/study/patientFrame.xhtml">
           <param name="StudyUID" value="#{studySelection[0]}" />
         </redirect>
      </rule>
      <rule if-outcome="success">
         <render view-id="/search/search.xhtml" />
      </rule>
    </navigation>
  </page>

  <page view-id="/cycle/cycleFrame.xhtml" action="#{CyclePageAction.cycle}">
    <navigation>
      <rule if-outcome="Remove">
         <render view-id="/cycle/cycleFrame.xhtml" />
      </rule>
      <rule if-outcome="success">
         <render view-id="/cycle/cycleFrame.xhtml" />
      </rule>
    </navigation>
  </page>
  
  <page view-id="/cycle/cycle.xhtml">
    <begin-conversation join="true" />
  </page>
  
  <page view-id="/cycle/patient.xhtml">
    <param name="PatientIdentifier" value="#{PatientViewed.patientIdentifier}" />
    <begin-conversation join="true" />
  </page>
  
  <page view-id="/study/patientFrame.xhtml" action="#{CyclePageAction.ensureStudyPresent}">
    <param name="PatientIdentifier" value="#{PatientViewed.patientIdentifier}" />
    <param name="studyUID" value="#{PatientViewed.studyUID}" />
    <param name="seriesUID" value="#{SeriesViewed.seriesUID}" />
    <param name="Position" value="#{ImageViewed.position}" />
  </page>
  
  <page view-id="/study/displayFrame.xhtml"> 
    <param name="PatientIdentifier" value="#{PatientViewed.patientIdentifier}" />
    <param name="studyUID" value="#{PatientViewed.studyUID}" />
    <param name="seriesUID" value="#{SeriesViewed.seriesUID}" />
    <param name="position" value="#{ImageViewed.position}" />
    <begin-conversation join="true" />
  </page>
  
  <page view-id="/study/study.xhtml">
    <param name="PatientIdentifier" value="#{PatientViewed.patientIdentifier}" />
    <param name="studyUID" value="#{PatientViewed.studyUID}" />
    <param name="seriesUID" value="#{SeriesViewed.seriesUID}" />
    <param name="position" value="#{ImageViewed.position}" />
    <begin-conversation join="true" />
  </page>
  
  <page view-id="/series/seriesTray.xhtml">
    <param name="studyUID" value="#{PatientViewed.studyUID}" />
    <param name="seriesUID" value="#{SeriesViewed.seriesUID}" />
    <begin-conversation join="true" />
  </page>
  
  <page view-id="/js/js.xhtml">
    <param name="jsEnabled" value="#{JavaScriptModel.javaScriptEnabled}" />
  </page>
  
  <page view-id="/image/image.xhtml">
    <param name="studyUID" value="#{PatientViewed.studyUID}" />
    <param name="seriesUID" value="#{SeriesViewed.seriesUID}" />
    <param name="position" value="#{ImageViewed.position}" />
    <param name="mode" value="#{DisplayMode.mode}" />
    <param name="counter" value="#{DisplayMode.counter}" />
    <!-- To be removed into an action item -->
    <param name="cine" value="#{ImageEvent.cine}" />
    <begin-conversation join="true" />
  </page>
  
  <page view-id="/image/action/*">
    <param name="studyUID" value="#{PatientViewed.studyUID}" />
    <param name="seriesUID" value="#{SeriesViewed.seriesUID}" />
    <param name="objectUID" value="#{ImageViewed.objectUID}" />
    <param name="position" value="#{ImageViewed.position}" />
    <param name="mode" value="#{DisplayMode.mode}" />
  </page>

  <page view-id="/image/action/WindowLevel.xhtml" action="#{DisplayMode.emptyAction}">
    <param name="windowWidth" value="#{WindowLevelModel.windowWidth}" />
    <param name="windowCenter" value="#{WindowLevelModel.windowCenter}" />
    <navigation>
      <redirect view-id="/image/image.xhtml" />
    </navigation>
  </page>
  
  <page view-id="/image/action/ZoomPan.xhtml" action="#{DisplayMode.emptyAction}" >
    <param name="zoom" value="#{ZoomPanModel.zoom}" />
    <param name="relZoom" value="#{ZoomPanModel.relZoom}" />
    <param name="panX" value="#{ZoomPanModel.panX}" />
    <param name="panY" value="#{ZoomPanModel.panY}" />
    <param name="region" value="#{ZoomPanModel.region}" />
    <navigation>
      <redirect view-id="/image/image.xhtml" />
    </navigation>
  </page>
  
</pages>