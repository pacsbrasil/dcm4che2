<project>
	<modelVersion>4.0.0</modelVersion>
	<parent>
		<groupId>dcm4che</groupId>
		<artifactId>dcm4chee-arr</artifactId>
		<version>1</version>
	</parent>
	<groupId>dcm4che</groupId>
	<artifactId>dcm4chee-arr-ejb-${db}</artifactId>
	<version>3.0-SNAPSHOT</version>
	<packaging>jar</packaging>
	<name>EJBs and Services for ARR</name>
	<dependencies>
		<dependency>
			<groupId>jboss.embeddable-ejb3</groupId>
			<artifactId>jboss-ejb3-all</artifactId>
			<version>ALPHA_8-patch2</version>
			<scope>provided</scope>
		</dependency>
		<dependency>
			<groupId>jboss.embeddable-ejb3</groupId>
			<artifactId>thirdparty-all</artifactId>
			<version>ALPHA_8-patch2</version>
			<scope>provided</scope>
		</dependency>
		<dependency>
			<groupId>jboss.embeddable-ejb3</groupId>
			<artifactId>jboss-ejb3-shutdownpatch</artifactId>
			<version>1</version>
			<scope>provided</scope>
		</dependency>
		<dependency>
			<groupId>org.slf4j</groupId>
			<artifactId>slf4j-log4j12</artifactId>
			<version>1.0</version>
		</dependency>
		<dependency>
			<groupId>jboss</groupId>
			<artifactId>jboss-j2ee</artifactId>
			<version>4.0.4.GA</version>
			<scope>provided</scope>
		</dependency>
		<dependency>
			<groupId>jboss</groupId>
			<artifactId>ejb3-persistence</artifactId>
			<version>4.0.4.GA</version>
			<scope>provided</scope>
		</dependency>
		<dependency>
			<groupId>jboss</groupId>
			<artifactId>jboss-ejb3x</artifactId>
			<version>4.0.4.GA</version>
			<scope>provided</scope>
		</dependency>
		<dependency>
			<groupId>jboss</groupId>
			<artifactId>jboss-annotations-ejb3</artifactId>
			<version>4.0.4.GA</version>
			<scope>provided</scope>
		</dependency>
		<dependency>
			<groupId>jboss</groupId>
			<artifactId>jboss-seam</artifactId>
			<version>1.0.1.GA</version>
		</dependency>
		<dependency>
			<groupId>jboss</groupId>
			<artifactId>jboss-annotations-ejb3</artifactId>
			<version>4.0.4.GA</version>
			<scope>provided</scope>
		</dependency>
		<dependency>
			<groupId>hibernate</groupId>
			<artifactId>hibernate</artifactId>
			<version>3.2.0.cr2</version>
			<scope>provided</scope>
		</dependency>
		<dependency>
			<groupId>hibernate</groupId>
			<artifactId>hibernate-annotations</artifactId>
			<version>3.2.0.CR1</version>
			<scope>provided</scope>
		</dependency>
		<dependency>
			<groupId>hibernate</groupId>
			<artifactId>hibernate-entitymanager</artifactId>
			<version>3.2.0.CR1</version>
			<scope>provided</scope>
		</dependency>
		<dependency>
			<groupId>org.testng</groupId>
			<artifactId>testng</artifactId>
			<version>5.1</version>
			<scope>test</scope>
			<classifier>jdk15</classifier>
		</dependency>
		<dependency>
			<groupId>dcm4che</groupId>
			<artifactId>dcm4che-tool-logger</artifactId>
			<version>2.0.8-SNAPSHOT</version>
			<scope>provided</scope>
		</dependency>
	</dependencies>
	<build>
		<finalName>dcm4chee-arr-${db}-${version}</finalName>
		<plugins>
			<plugin>
				<artifactId>maven-compiler-plugin</artifactId>
				<configuration>
					<source>1.5</source>
					<target>1.5</target>
				</configuration>
			</plugin>

			<plugin>
				<groupId>org.apache.maven.plugins</groupId>
				<artifactId>maven-surefire-plugin</artifactId>
				<version>2.8-SNAPSHOT</version>
				<configuration>
					<suiteXmlFiles>
						<suiteXmlFile>
							src/test/conf/testng.xml
						</suiteXmlFile>
					</suiteXmlFiles>

					<!-- Need this in order to deploy Beans and our EJBs -->
					<systemProperties>
						<property>
							<name>java.class.path</name>
							<value>
								target/test-classes;target/classes;
							</value>
						</property>
					</systemProperties>
				</configuration>
			</plugin>

			<!-- 
				We have to resort to ant script to copy the right database specific resources
				for packaging after test is completed.
			 -->
			<plugin>
				<groupId>org.apache.maven.plugins</groupId>
				<artifactId>maven-antrun-plugin</artifactId>
				<executions>
					<execution>
						<id>copy-db-files</id>
						<phase>test</phase>
						<configuration>
							<tasks>
								<copy overwrite="true"
									todir="${basedir}/target/classes">
									<fileset
										dir="${basedir}/src/${db}/resources" />
								</copy>
							</tasks>
						</configuration>
						<goals>
							<goal>run</goal>
						</goals>
					</execution>
				</executions>
			</plugin>

		</plugins>

		<resources>
			<resource>
				<directory>src/main/resources</directory>
			</resource>
			<resource>
				<!-- This is for testing, will be overwritten during "package" phase -->
				<directory>src/hsql/resources</directory>
			</resource>
		</resources>

		<testResources>
			<testResource>
				<directory>src/test/resources</directory>
			</testResource>
			<testResource>
				<directory>src/test/conf</directory>
			</testResource>
		</testResources>
				
	</build>
	
	<pluginRepositories>
		<pluginRepository>
			<id>tapestry.javaforge</id>
			<url>http://howardlewisship.com/repository</url>
			<snapshots> 
				<enabled>true</enabled> 
			</snapshots> 
		</pluginRepository>
		<pluginRepository>
			<id>maven.snapshots</id>
			<url>http://svn.apache.org/maven-snapshot-repository</url>
			<snapshots> 
				<enabled>true</enabled> 
			</snapshots> 
		</pluginRepository>
	</pluginRepositories>
</project>
